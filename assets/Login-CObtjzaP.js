import{r as g,u as f,a as j,b as w,j as e,I as l,B as N,N as c,l as k,s as y,f as b}from"./index-D-L5BnBK.js";import{C as S,a as C,b as E,c as _}from"./card-BmmfJ32a.js";import{o as v,c as I,a as n}from"./yup-D_lY0uCS.js";const q=I({login:n().required("Vui lòng nhập Email"),password:n().required("Vui lòng nhập mật khẩu")});function U(){const[i,r]=g.useState(!1),t=f(),m=j(),{register:o,handleSubmit:d,setError:u,clearErrors:p,formState:{errors:s}}=w({resolver:v(q)}),h=async x=>{r(!0);try{const a=await k(x);localStorage.setItem("access_token",a.access_token),localStorage.setItem("refresh_token",a.refresh_token),t(y(a.user)),p("err"),m("/home"),t(b({type:"for_you",page:1,per_page:5}))}catch(a){console.log(a),u("err",{type:"manual",message:"Sai tài khoản hoặc mật khẩu"})}finally{r(!1)}};return e.jsxs(S,{className:"w-full max-w-sm m-auto",children:[e.jsx(C,{children:e.jsx(E,{className:"m-auto",children:"Log in with your Instagram account"})}),e.jsxs("form",{className:"flex flex-col items-center gap-2",onSubmit:d(h),children:[e.jsxs("div",{className:"flex flex-col w-[80%] m-auto gap-2",children:[e.jsx(l,{type:"email",autoComplete:"username",placeholder:"Email",...o("login",{required:!0})}),s.login&&e.jsx("span",{className:"text-red-500 text-sm",children:s.login.message}),e.jsx(l,{type:"password",autoComplete:"current-password",placeholder:"password",...o("password",{required:!0})}),s.password&&e.jsx("span",{className:"text-red-500 text-sm",children:s.password.message})]}),s.err&&e.jsx("span",{className:"text-red-500 text-sm",children:s.err.message}),e.jsx(N,{disabled:i,className:"block",type:"submit",children:"submit"})]}),e.jsxs(_,{className:" flex flex-col",children:[e.jsx(c,{className:"",to:"/forgot-password",children:"Forgot PassWord?"}),e.jsxs("p",{children:["Bạn chưa có tài khoản? ",e.jsx(c,{to:"/register",children:"Đăng ký"})]})]})]})}export{U as default};
